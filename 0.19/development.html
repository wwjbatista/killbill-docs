<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.7.1"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.css"><title>Kill Bill development</title><style>/*Default CSS*/

/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
    h1{font-size:2.75em}
    h2{font-size:2.3125em}
    h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
    h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
    body.toc2{padding-left:15em;padding-right:0}
    #toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
    #toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
    #toc.toc2>ul{font-size:.9em;margin-bottom:0}
    #toc.toc2 ul ul{margin-left:0;padding-left:1em}
    #toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
    body.toc2.toc-right{padding-left:0;padding-right:15em}
    body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
    #toc.toc2{width:20em}
    #toc.toc2 #toctitle{font-size:1.375em}
    #toc.toc2>ul{font-size:.95em}
    #toc.toc2 ul ul{padding-left:1.25em}
    body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:#2E3336;padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
    *{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
    a{color:inherit!important;text-decoration:underline!important}
    a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
    a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
    abbr[title]:after{content:" (" attr(title) ")"}
    pre,blockquote,tr,img{page-break-inside:avoid}
    thead{display:table-header-group}
    img{max-width:100%!important}
    p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
    h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
    #toc,.sidebarblock,.exampleblock>.content{background:none!important}
    #toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
    .sect1{padding-bottom:0!important}
    .sect1+.sect1{border:0!important}
    #header>h1:first-child{margin-top:1.25rem}
    body.book #header{text-align:center}
    body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
    body.book #header .details{border:0!important;display:block;padding:0!important}
    body.book #header .details span:first-child{margin-left:0!important}
    body.book #header .details br{display:block}
    body.book #header .details br+span:before{content:none!important}
    body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
    body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
    .listingblock code[data-lang]:before{display:block}
    #footer{background:none!important;padding:0 .9375em}
    #footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
    .hide-on-print{display:none!important}
    .print-only{display:block!important}
    .hide-for-print{display:none!important}
    .show-for-print{display:inherit!important}}

  .listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments  { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */

/*Custom CSS*/
.container{
    max-width: 100%;
}
.logo{
    margin-top: 5px;
}
.toc{
    margin-top: 45px;
}
#toctitle{
    font-size: 1.2em;
}
.sectlevel1{
    padding-left: 7px;
}
.border-columns{
    background-color: #2E3336;
}
.footer {
    display: block;
    bottom: 0;
    width: 75%;
    height: 40px;
    line-height: 40px;
    background-color: #2E3336;
    margin: 0 auto;
}
.footer > .container {
    padding-right: 15px;
    padding-left: 15px;
}
nav[data-toggle=toc] .nav>li>a {
    display: block;
    padding: 4px 20px;
    font-size: 13px;
    font-weight: 500;
    color: #fff;
}
nav[data-toggle=toc] .nav>li>a:hover {
    background-color: #1F7CB5;
    color: #fff;
}
.text-muted {
    color: #fff!important;
}
nav[data-toggle='toc'] {
    top: 80px;
}

nav[data-toggle=toc] .nav-link.active, nav[data-toggle=toc] .nav-link.active:focus, nav[data-toggle=toc] .nav-link.active:hover {
    padding-left: 18px;
    font-weight: 700;
    color: #1F7CB5;
    background-color: transparent;
    border-left: 2px solid #1F7CB5;
}

/* small screens */
@media (max-width: 768px) {
    /* override stickyness so that the navigation does not follow scrolling */
    nav[data-toggle='toc'] {
        margin-bottom: 42px;
        position: static;
    }
    nav[data-toggle='toc'] .nav .active .nav {
        display: none;
    }
}</style>
<style>.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments, .listingblock .pygments code { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */</style></head><body data-spy="scroll" data-target="#toc" class="book"><div class="container"><div class="row"><div id="header" class="col-sm-2 border-columns"><a href="/0.19/"><img class="logo rounded mx-auto d-block sticky-top" src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/logo.png"></a><nav id="toc" data-toggle="toc" class="toc sticky-top"></nav></div><div class="col-sm-8"><div id="header"><h1>Kill Bill development</h1></div><div id="content"><div class="sect1"><h2 id="_environment_setup">Environment setup</h2><div class="sectionbody"><div class="paragraph"><p>Pre-requisites:</p></div>
<div class="ulist"><ul><li><p>JDK 7 or later installed</p></li><li><p>Maven 3.5.2 or later installed</p></li><li><p>Git 2.15.1 or later installed</p></li></ul></div>
<div class="sect2"><h3 id="_eclipse">Eclipse</h3><div class="paragraph"><p>The Kill Bill projects can be imported into the Eclipse IDE as long as the <a href="https://www.eclipse.org/m2e/">m2e</a> plugin is installed. Recent versions of the <a href="https://www.eclipse.org/downloads/eclipse-packages/">Eclipse IDE for Java EE Developers</a> come with this plugin already.</p></div>
<div class="paragraph"><p>Some of the Maven plugins used may not be available to m2e, however, and the projects will not import completely. To work around this issue, the Eclipse <code>Preferences &gt; Maven &gt; Lifecycle Mappings</code> configuration can be updated to include mappings like the following:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash">&lt;?xml <span class="tok-nv">version</span><span class="tok-o">=</span><span class="tok-s2">&quot;1.0&quot;</span> <span class="tok-nv">encoding</span><span class="tok-o">=</span><span class="tok-s2">&quot;UTF-8&quot;</span>?&gt;
&lt;lifecycleMappingMetadata&gt;
 &lt;pluginExecutions&gt;
   &lt;pluginExecution&gt;
     &lt;pluginExecutionFilter&gt;
       &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
       &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;
       &lt;versionRange&gt;1.4&lt;/versionRange&gt;
       &lt;goals&gt;
         &lt;goal&gt;run&lt;/goal&gt;
       &lt;/goals&gt;
     &lt;/pluginExecutionFilter&gt;
     &lt;action&gt;
       &lt;execute&gt;
         &lt;runOnConfiguration&gt;true&lt;/runOnConfiguration&gt;
         &lt;runOnIncremental&gt;true&lt;/runOnIncremental&gt;
       &lt;/execute&gt;
     &lt;/action&gt;
   &lt;/pluginExecution&gt;
   &lt;pluginExecution&gt;
     &lt;pluginExecutionFilter&gt;
       &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
       &lt;artifactId&gt;templating-maven-plugin&lt;/artifactId&gt;
       &lt;versionRange&gt;1.0-alpha-3&lt;/versionRange&gt;
       &lt;goals&gt;
         &lt;goal&gt;filter-sources&lt;/goal&gt;
       &lt;/goals&gt;
     &lt;/pluginExecutionFilter&gt;
     &lt;action&gt;
       &lt;execute&gt;
         &lt;runOnConfiguration&gt;true&lt;/runOnConfiguration&gt;
         &lt;runOnIncremental&gt;true&lt;/runOnIncremental&gt;
       &lt;/execute&gt;
     &lt;/action&gt;
   &lt;/pluginExecution&gt;
   &lt;pluginExecution&gt;
     &lt;pluginExecutionFilter&gt;
       &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
       &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;
       &lt;versionRange&gt;<span class="tok-o">[</span>1.0,<span class="tok-o">)</span>&lt;/versionRange&gt;
       &lt;goals&gt;
         &lt;goal&gt;add-source&lt;/goal&gt;
         &lt;goal&gt;add-test-source&lt;/goal&gt;
         &lt;goal&gt;add-resource&lt;/goal&gt;
         &lt;goal&gt;add-test-resource&lt;/goal&gt;
         &lt;goal&gt;maven-version&lt;/goal&gt;
         &lt;goal&gt;parse-version&lt;/goal&gt;
       &lt;/goals&gt;
     &lt;/pluginExecutionFilter&gt;
     &lt;action&gt;
       &lt;execute&gt;
         &lt;runOnConfiguration&gt;true&lt;/runOnConfiguration&gt;
         &lt;runOnIncremental&gt;true&lt;/runOnIncremental&gt;
       &lt;/execute&gt;
     &lt;/action&gt;
   &lt;/pluginExecution&gt;
 &lt;/pluginExecutions&gt;
&lt;/lifecycleMappingMetadata&gt;</code></pre></div></div></div>
<div class="sect2"><h3 id="_build">Build</h3><div class="paragraph"><p>Kill Bill is a standard Maven project. Simply run the following command from the <a href="https://github.com/killbill/killbill">project</a> root directory:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash">mvn clean install -DskipTests</code></pre></div></div>
<div class="paragraph"><p>On the first build, Maven will download all the dependencies from the internet and cache them in the local repository (<code>~/.m2/repository</code>), which can take a considerable amount of time. Subsequent builds will be faster.</p></div>
<div class="paragraph"><p>Once built, you can start Kill Bill by running:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash">./bin/start-server -s</code></pre></div></div>
<div class="sect3"><h4 id="_postgresql">PostgreSQL</h4><div class="paragraph"><p>By default, Kill Bill will expect a MySQL database. To switch to PostgreSQL:</p></div>
<div class="ulist"><ul><li><p>Create a killbill user and database (verify connectivity with <code>psql -h 127.0.0.1 -U killbill -p 5432</code>):</p></li></ul></div>
<div class="listingblock"><div class="content"><pre>create USER killbill;
\password killbill;
CREATE DATABASE killbill WITH OWNER killbill;</pre></div></div>
<div class="ulist"><ul><li><p>Create the schema:</p></li></ul></div>
<div class="listingblock"><div class="content"><pre>./bin/db-helper -a create  --driver postgres -u killbill -p killbill</pre></div></div>
<div class="ulist"><ul><li><p>Modify the <code>profiles/killbill/src/main/resources/killbill.properties</code>:</p></li></ul></div>
<div class="listingblock"><div class="content"><pre>org.killbill.dao.url=jdbc:postgresql://127.0.0.1:5432/killbill
org.killbill.dao.user=killbill
org.killbill.dao.password=killbill

org.killbill.billing.osgi.dao.url=jdbc:postgresql://127.0.0.1:5432/killbill
org.killbill.billing.osgi.dao.user=killbill
org.killbill.billing.osgi.dao.password=killbill</pre></div></div></div></div>
<div class="sect2"><h3 id="_dependencies">Dependencies</h3><div class="paragraph"><p>The base <code>pom.xml</code> (<code>org.kill-bill.billing:killbill-oss-parent</code>) defines all of the dependencies required by Kill Bill. If a <code>-SNAPSHOT</code> version is specified (e.g. <code>0.141.74-SNAPSHOT</code>), this means some dependencies haven&#8217;t been released yet and you need to build them locally, before being able to build Kill Bill.</p></div>
<div class="paragraph"><p>Typically, the following repositories need to be built in order:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p><a href="https://github.com/killbill/killbill-oss-parent">killbill-oss-parent</a></p></li><li><p><a href="https://github.com/killbill/killbill-commons">killbill-commons</a></p></li><li><p><a href="https://github.com/killbill/killbill-platform">killbill-platform</a></p></li></ol></div></div></div></div>
<div class="sect1"><h2 id="_navigating_the_kill_bill_codebase">Navigating the Kill Bill codebase</h2><div class="sectionbody"><div class="paragraph"><p>It can be quite daunting to start poking around the Kill Bill codebase, as the code is scattered over various repositories. Here is a primer on how to get started.</p></div>
<div class="sect2"><h3 id="_core_system">Core system</h3><div class="ulist"><ul><li><p><a class="bare" href="https://github.com/killbill/killbill-api">https://github.com/killbill/killbill-api</a>: Java APIs, used when embedding Kill Bill (advanced users), by the REST API layer (internally) as well as by plugins, which need to interact with the core system.</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill-plugin-api">https://github.com/killbill/killbill-plugin-api</a>: Java Plugin APIs, which need to be implemented by plugin developers.</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill-commons">https://github.com/killbill/killbill-commons</a>: similar in concept to Apache Commons, repository of re-useable components. You could use these in your projects even outside of the Kill Bill environment.</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill-platform">https://github.com/killbill/killbill-platform</a>: underlying Kill Bill platform, contains code unrelated to billing and payments, such as setting up the lifecycle, the OSGI environment, the webapp container bridge, logging, etc.</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill">https://github.com/killbill/killbill</a>: the Kill Bill library, containing the core of the system. It is divided into submodules, each one of them being independent (own APIs, own set of tables, etc.) and interacting with other modules either via internal Java APIs or Bus events.</p></li></ul></div>
<div class="paragraph"><p>The following blog posts can help provide more context on the Kill Bill architecture:</p></div>
<div class="ulist"><ul><li><p><a class="bare" href="http://killbill.io/blog/kill-bill-billing-system-architecture/">http://killbill.io/blog/kill-bill-billing-system-architecture/</a></p></li><li><p><a class="bare" href="http://killbill.io/blog/kill-bill-plugins-architecture/">http://killbill.io/blog/kill-bill-plugins-architecture/</a></p></li><li><p><a class="bare" href="http://killbill.io/blog/persistent-bus-in-kill-bill/">http://killbill.io/blog/persistent-bus-in-kill-bill/</a></p></li></ul></div></div>
<div class="sect2"><h3 id="_ecosystem">Ecosystem</h3><div class="ulist"><ul><li><p><a class="bare" href="https://github.com/killbill/killbill-integration-tests">https://github.com/killbill/killbill-integration-tests</a>: while each repository contains its own test suites, from unit tests to functional tests (with and without a persistent layer), as well as end-to-end tests (see the <code>beatrix</code> and <code>profiles/killbill</code> tests in the main killbill repository for example), the killbill-integration-tests repository adds another set of tests which focus on long running scenarii against a running Kill Bill server. This also gives you a base framework to develop your own tests, to verify the integration of Kill Bill in your environment and to make sure it follows your business rules.</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill-client-java">https://github.com/killbill/killbill-client-java</a>, <a class="bare" href="https://github.com/killbill/killbill-client-ruby">https://github.com/killbill/killbill-client-ruby</a>, etc. provide clients for the HTTP API in various languages.</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill-stripe-plugin">https://github.com/killbill/killbill-stripe-plugin</a>, <a class="bare" href="https://github.com/killbill/killbill-paypal-express-plugin">https://github.com/killbill/killbill-paypal-express-plugin</a>, etc. provide integrations with payment gateways (payment plugins).</p></li><li><p><a class="bare" href="https://github.com/killbill/killbill-logging-plugin">https://github.com/killbill/killbill-logging-plugin</a>, <a class="bare" href="https://github.com/killbill/killbill-analytics-plugin">https://github.com/killbill/killbill-analytics-plugin</a>, etc. provide additional functionality (e.g. notification plugins).</p></li></ul></div></div></div></div>
<div class="sect1"><h2 id="_date_time_and_timezone">Date, Time and Timezone</h2><div class="sectionbody"><div class="paragraph"><p>A few general concepts around time in Kill Bill:</p></div>
<div class="ulist"><ul><li><p>Kill Bill&#8217;s granularity is the day, and as a result the system will not invoice for portions of a day.</p></li><li><p>Each account in Kill Bill has a default timezone and that timezone is used throughout the system to be able to convert a DateTime into a Date into the account Timezone.</p></li><li><p>Kill Bill will internally use UTC for all its Datetime manipulation, but any Date information is interpreted as a Date in the account timezone.</p></li></ul></div>
<div class="sect2"><h3 id="_mysql_date_datetime_timestamp">Mysql Date, DateTime, Timestamp</h3><div class="paragraph"><p>We are only relying on date and datetime which are not sensitive to the MySQL timezone setting:</p></div>
<div class="ulist"><ul><li><p>Datetime: Storing a Datetime value into MySQL relies on <code>datetime</code> which is independent of the mysql time_zone. It is stored as a UTC value, and the selected value is always the same, regardless of the MySQL timezone.</p></li><li><p>LocalDate: Storing a LocalDate value into MySQL relies on <code>date</code> which is also independent of the MySQL time_zone.</p></li></ul></div></div>
<div class="sect2"><h3 id="_system_configuration">System Configuration</h3><div class="paragraph"><p>From an operation point of view, there are different places where timezone may be set:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Server on which Kill Bill runs</p></li><li><p>JVM setting</p></li><li><p>Database server</p></li></ol></div>
<div class="paragraph"><p><strong>It is required to have Kill Bill runs in UTC for correct serialization of DateTime/LocalDate.</strong> Actually, in Java, there is no UTC timezone setting but instead <code>GMT</code>. In a first approximation, we will consider those identical, even though they are not and could lead to some rare issues.</p></div>
<div class="paragraph"><p>When Kill Bill starts, it will override the default timezone if this one was specified as a system property with something different than GMT. The code will log a WARN message and proceed to do so, to avoid issues later down the road.</p></div></div>
<div class="sect2"><h3 id="_rest_apis">REST APIs</h3><div class="paragraph"><p>Kill Bill APIs that accept dates as an argument will allow for the following:</p></div>
<div class="ulist"><ul><li><p>A fully qualified Datetime (a point in time)</p></li><li><p>A Date</p></li></ul></div>
<div class="paragraph"><p>If there is a need to convert from a Datetime to a Date, the conversion will occur by specifying the account timezone, so the resulting Date is as seen by the customer. This would for instance be the case when triggering a future invoice by specifying a target Datetime.</p></div>
<div class="paragraph"><p>If there is a need to convert from a Date to Datetime, this is obviously more subtle as we can&#8217;t infer the additional precision to compute the time. The Date is always interpreted to be a Date as seen by the customer, that is in the account timezone.</p></div>
<div class="paragraph"><p>The system will use the reference time on the account in such a way that converting back from that fully qualified Datetime using the account timezone would give us back the original Date provided.</p></div></div>
<div class="sect2"><h3 id="_multiple_changes_in_a_day">Multiple changes in a day</h3><div class="paragraph"><p>So what happens if a user is making several subscription changes within the same day?</p></div>
<div class="paragraph"><p>In the default mode, Kill Bill will react to changes immediately and trigger a new invoice for each change, which in turn might result in a charge.</p></div>
<div class="paragraph"><p>Let&#8217;s consider the following case, where there exists 3 monthly plans (Bronze, Silver and Gold), ordered by ascending price:</p></div>
<div class="ulist"><ul><li><p>Initially, the customer is invoiced for the Bronze, from january 1st to feb 1st. By default a payment would also be made.</p></li><li><p>On January 1st again, the customer changes its mind and moves to Silver. A new invoice is generated that will credit the full month&#8201;&#8212;&#8201;including the day of january 1st&#8201;&#8212;&#8201;and the new plan is now invoiced from january 1st to february 1st and the credit generated is immediately used, so in the end the customer is really only invoiced for the difference of the price between the 2 plans; Additionally, a new payment is made for that amount.</p></li><li><p>If now the customer changes its plan on Jan 2nd, the portion from January 1st to January 2nd will be invoiced for the Silver plan and the portion from January 2nd to February 1st will be invoiced for the Gold plan.</p></li></ul></div>
<div class="paragraph"><p>From an entitlement point of view, the system will reflect the current plan and therefore two different calls to retrieve the plan information on January 1st may lead to different results since there was a change of plan during that day.</p></div></div></div></div>
<div class="sect1"><h2 id="_adding_a_new_cache">Adding a new cache</h2><div class="sectionbody"><div class="sect2"><h3 id="_overview">Overview</h3><div class="olist arabic"><ol class="arabic"><li><p>Create a new CacheType in <code>@Cachable</code></p></li><li><p>Create a new cache loader in <code>org.killbill.billing.util.cache</code>. Make sure to extend <code>BaseCacheLoader</code> and reference your CacheType via <code>getCacheType()</code>. The loader should also be marked as <code>@Singleton</code>.</p></li><li><p>Register your new cache loader in the constructor of <code>EhCacheCacheManagerProvider</code></p></li><li><p>Configure your new cache in ehcache.xml</p></li></ol></div>
<div class="paragraph"><p>You&#8217;re all set! To start caching your <code>SqlDao</code> calls, mark your method as <code>@Cachable</code> and use <code>@CachableKey</code> in the method arguments to create the cache key.</p></div></div>
<div class="sect2"><h3 id="_families_of_caches">Families of Caches</h3><div class="paragraph"><p>There are different types objects cached in Kill Bill:</p></div>
<div class="ulist"><ul><li><p>Id mapping caches (UUID &#8594; Long); for e.g <code>accountRecordId</code></p></li><li><p>Audit logs</p></li><li><p>Higher level resources (Tenant Catalog, Tenant OverdueConfig)</p></li></ul></div>
<div class="sect3"><h4 id="_id_mapping_caches">Id mapping caches</h4><div class="paragraph"><p>The information cached is immutable and does not have to be synchronized across Kill Bill instances; in the worst case, we have a cache miss on a specific instance, and then the cache will end up being populated.</p></div>
<div class="paragraph"><p>The mapping info is implemented in <code>DefaultNonEntityDao</code>; the call first provides a <code>CacheController</code> which will look for cached info, and if not found call the corresponding CacheLoader. This one in turn will call back the <code>DefaultNonEntityDao</code> with a null <code>CacheController</code>, which will result in making the call to the database and populate the cache.</p></div>
<div class="paragraph"><p>Also, there is some special logics in <code>EntitySqlDaoWrapperInvocationHandler</code> that will populate the cache when objects get created&#8201;&#8212;&#8201;when they get retrieved actually the first time using <code>getById</code>. Since the pattern in Kill Bill is to retrieve store information using <code>getById</code> after object was created, this ends up populating the mapping cache.</p></div></div>
<div class="sect3"><h4 id="_audit_logs">Audit logs</h4><div class="paragraph"><p>The information cached here is mutable and needs to be synchronized across different instances of Kill Bill. <a href="https://github.com/killbill/killbill/issues/247">This has not been implemented.</a></p></div>
<div class="paragraph"><p>The logics to cache information happens in <code>EntitySqlDaoWrapperInvocationHandler</code>.</p></div></div>
<div class="sect3"><h4 id="_higher_level_resources">Higher level resources</h4><div class="paragraph"><p>The information cached here is mutable and needs to be synchronized across different instances of Kill Bill. The code path is a bit more complex because:</p></div>
<div class="ulist"><ul><li><p>We are caching higher abstraction than what is actually inserted in the raw tables; for e.g we store strings in the <code>tenant_kvs</code> table for the per tenant catalog and yet we cache the <code>VersionedCatalog</code> so that it does not have to rebuilt on each call.</p></li><li><p>We need to take care of the multi-node implementation which means we need some form of cache invalidation.</p></li></ul></div>
<div class="paragraph"><p>There are different pieces for that puzzle&#8201;&#8212;&#8201;let&#8217;s look at the catalog, but this is similar to overdue for the overdue config xml files:</p></div>
<div class="paragraph"><p>In the catalog module, the service registers the <code>CacheInvalidationCallback</code> with the tenant module at <code>INIT_SERVICE</code>; this is required to make sure the tenant module which does not have dependency on the catalog can call catalog specific code to invalidate the entries when it detects some modifications. The per tenant catalog are cached in the catalog module in the <code>EhCacheCatalogCache</code>. The <code>EhCacheCatalogCache</code> offers the api to load and invalidate the cache.</p></div>
<div class="paragraph"><p>In the util module, we find the <code>TenantCatalogCacheLoader</code>; this is symmetrical with any other types of cache we discussed. The <code>TenantCatalogCacheLoader</code> is the one making the call to load information from disk. In that case this is slightly more complex because the <code>TenantCatalogCacheLoader</code> needs to return a higher level abstraction than the raw strings stored in disk, and the conversion requires some logic that exists in the catalog module. Since util does not have any dependency on the catalog module, the catalog module needs to also pass a <code>LoaderCallback</code> which knows how to make the transformation. Also note that the raw strings are loaded using the <code>TenantInternalApi</code> as opposed to just making a DAO call since the raw information lives in the tenant module.</p></div>
<div class="paragraph"><p>The tenant module is where the raw information is stored. It provides 2 sets of APIs:</p></div>
<div class="ulist"><ul><li><p>An <code>TenantInternalApi</code> which is used internally to initialize <code>CacheInvalidationCallback</code> and retrieve information without going through the  lower level cache magic in <code>EntitySqlDaoWrapperInvocationHandler</code>.</p></li><li><p>A <code>TenantUserApi</code> which allows to store the raw data <code>addTenantKeyValue()</code>.
In addition it contains also a small service that listens periodically to broadcast notifications when a catalog for a given tenant has changed. This is implemented in <code>TenantCacheInvalidation</code> and the goal here is to invoked the invalidation callback.</p></li></ul></div></div></div></div></div>
<div class="sect1"><h2 id="_adding_a_new_plugin_api">Adding a new plugin API</h2><div class="sectionbody"><div class="paragraph"><p>Kill Bill supports multiple <a href="https://github.com/killbill/killbill-plugin-api">plugin APIs</a>, which goal is to customize the system or interact with third party providers.</p></div>
<div class="paragraph"><p>The purpose of this doc is to <strong>help with the engineering effort</strong> required to add a new plugin API, and is not an exact exhaustive list of recipes to apply.</p></div>
<div class="sect2"><h3 id="_overview_of_the_changes">Overview of the changes</h3><div class="paragraph"><p>The following areas have to be considered when adding a new plugin API:</p></div>
<div class="ulist"><ul><li><p><strong>Plugin Apis</strong>: Add the new maven module into the repo <a class="bare" href="https://github.com/killbill/killbill-plugin-api">https://github.com/killbill/killbill-plugin-api</a> to match that new API, and define all the abstractions and APIs</p></li><li><p><strong><a href="https://github.com/killbill/killbill-platform">Kill Bill platform</a> changes</strong>:</p><div class="ulist"><ul><li><p>Modify the OSGI magic to auto-detect plugins of that new type when they are discovered</p></li><li><p>Add JRuby support</p></li></ul></div></li><li><p><strong><a href="https://github.com/killbill/killbill">Kill Bill Core</a> changes</strong>:</p><div class="ulist"><ul><li><p>New Plugin API Wiring</p><div class="ulist"><ul><li><p>Add the Guice binding in the component module</p></li><li><p>Make sure it is injected at the right place (where it needs to be used)</p></li></ul></div></li><li><p>Plug the new plugin API into the code (modify the code to now call that API where it makes sense)</p></li><li><p>Decide/Implement mechanism to use if there are multiple plugins of that type registered</p></li></ul></div></li><li><p><strong>Ruby</strong>:</p><div class="ulist"><ul><li><p>Enhance the <a href="https://github.com/killbill/killbill-plugin-framework-ruby">Ruby framework</a></p></li><li><p>Create a a ruby test plugin</p></li></ul></div></li><li><p><strong>Tests</strong>:</p><div class="ulist"><ul><li><p><a href="https://github.com/killbill/killbill/tree/master/beatrix/src/test/java/org/killbill/billing/beatrix/integration">Beatrix tests</a>: add a new <code>beatrix</code> test that will test that API (and verify the plumbing is correct as well)</p></li><li><p>Write an <a href="https://github.com/killbill/killbill-integration-tests">integration test</a> that will use the ruby test plugin</p></li></ul></div></li></ul></div></div>
<div class="sect2"><h3 id="_gory_details">Gory details</h3><div class="paragraph"><p>Let&#8217;s assume we are trying to add new plugin API called <code>Foo</code>, in a Kill Bill module called <code>Bar</code>. In the case of the <code>PaymentPluginApi</code>, <code>Foo</code> = <code>Payment</code>, and the module <code>Bar</code> = <a class="bare" href="https://github.com/killbill/killbill/tree/master/payment">https://github.com/killbill/killbill/tree/master/payment</a>.</p></div>
<div class="sect3"><h4 id="_platform_changes">Platform Changes</h4><div class="paragraph"><p>The OSGI magic to register new plugins of a given type occurs in <a href="https://github.com/killbill/killbill-platform/blob/master/osgi/src/main/java/org/killbill/billing/osgi/KillbillActivator.java"><code>KillbillActivator</code></a>:</p></div>
<div class="paragraph"><p>The following would need to be added in the <code>KillbillActivator</code></p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="java"><span class="tok-nd">@Inject</span><span class="tok-o">(</span><span class="tok-n">optional</span> <span class="tok-o">=</span> <span class="tok-kc">true</span><span class="tok-o">)</span>
<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">addFooPluginApiOSGIServiceRegistration</span><span class="tok-o">(</span><span class="tok-kd">final</span> <span class="tok-n">OSGIServiceRegistration</span><span class="tok-o">&lt;</span><span class="tok-n">FooPluginApi</span><span class="tok-o">&gt;</span> <span class="tok-n">fooProviderPluginRegistry</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">allRegistrationHandlers</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">fooProviderPluginRegistry</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre></div></div>
<div class="paragraph"><p>Additionally, there is Java platform piece of code that needs to be written to support Ruby plugins:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>In <a href="https://github.com/killbill/killbill-platform/blob/master/osgi-bundles/bundles/jruby/src/main/java/org/killbill/billing/osgi/bundles/jruby/JRubyActivator.java"><code>JRubyActivator</code></a>, define new <code>KILLBILL_PLUGIN_JFOO = "Killbill::Plugin::Api::FooPluginApi"</code>, and modify <code>startWithContextClassLoader</code> to support <code>Foo</code></p></li><li><p>Create new class <code>JRubyFooPlugin</code></p></li><li><p>Add Guice binding where necessary</p></li></ol></div></div>
<div class="sect3"><h4 id="_kill_bill_core_changes">Kill Bill Core Changes</h4><div class="paragraph"><p>This section is a bit harder to describe as it depends on the plugin type, and what the code expects to do with that plugin API. But the main pieces are:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Create a new <code>DefaultFooProviderPluginRegistryProvider implements Provider&lt;OSGIServiceRegistration&lt;FooPluginApi&gt;&gt;</code></p></li><li><p>Create new <code>DefaultFooProviderPluginRegistry implements OSGIServiceRegistration&lt;FooPluginApi&gt;</code></p></li><li><p>Add Guice bindings in the module for <code>DefaultBarModule</code></p></li><li><p>Inject the new registry <code>OSGIServiceRegistration&lt;FooPluginApi&gt;</code> where it is needed, that is at the place where the current code will need to interact with that new <code>FooPluginApi</code> (See example in <code>InvoicePluginDispatcher</code> for <code>InvoicePluginApi</code>)</p></li><li><p>Define the mechanism to decide what happens when there are multiple plugins registered for that api. The code could walk through all plugins (ordering, aggregation or stop at first one that replies, &#8230;&#8203;), use some property or other mechanism to pick a specific plugin. For instance:</p><div class="ulist"><ul><li><p><code>PaymentPluginApi</code>: The Payment code will use the PaymentMethod associated the payment call to decide how to route to the correct plugin</p></li><li><p><code>InvoicePluginApi</code>: The Invoice code will loop through all plugins and aggregate the results</p></li></ul></div></li><li><p>Potentially add some <code>NoOpFooProviderPluginProvider</code> and <code>NoOpFooPluginApi</code> if Kill Bill needs to ship with an embedded default plugin by default, or if those are needed for tests</p></li></ol></div></div>
<div class="sect3"><h4 id="_beatrix_tests">Beatrix tests</h4><div class="paragraph"><p>Take a look at <a href="https://github.com/killbill/killbill/blob/master/beatrix/src/test/java/org/killbill/billing/beatrix/integration/TestWithTaxItems.java">TestWithTaxItems</a> which tests the <code>InvoicePluginApi</code></p></div></div>
<div class="sect3"><h4 id="_ruby_framework">Ruby Framework</h4><div class="olist arabic"><ol class="arabic"><li><p>A new class <code>foo.rb</code> must be defined similar to <a href="https://github.com/killbill/killbill-plugin-framework-ruby/blob/master/lib/killbill/invoice.rb"><code>invoice.rb</code></a> for the <code>InvoicePluginApi</code> and add <code>require</code> in <code>killbill.rb</code></p></li><li><p>Regenerate the auto-generated plugin classes using the <a href="https://github.com/killbill/killbill-java-parser">generator</a></p></li></ol></div></div></div></div></div>
<div class="sect1"><h2 id="_plugin_compatibility_with_api_changes">Plugin Compatibility with API changes</h2><div class="sectionbody"><div class="paragraph"><p>It would very convenient to make backward compatible API changes to a given <code>stable</code> Kill Bill version (e.g 0.20.x), but in order to do that we need to understand what is the impact on existing plugins (that were build prior such api change). This document tracks some investigation made to answers this question.</p></div>
<div class="sect2"><h3 id="_exporting_a_new_api_class">Exporting a new API Class</h3><div class="paragraph"><p>At the time of this writing the <code>OverdueApi</code> is not exported to plugins&#8201;&#8212;&#8201;but <a href="https://github.com/killbill/killbill-api/issues/30">it should</a>.</p></div>
<div class="paragraph"><p>In this experiment, I modified <code>killbill-platform</code> to export <code>OverdueApi</code>, and checked what was happening:</p></div>
<div class="paragraph"><p>Starting any of our Ruby plugin <strong>would not work</strong>.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="ruby"><span class="tok-n">caused</span> <span class="tok-ss">by</span><span class="tok-p">:</span> <span class="tok-n">org</span><span class="tok-o">.</span><span class="tok-n">jruby</span><span class="tok-o">.</span><span class="tok-n">exceptions</span><span class="tok-o">.</span><span class="tok-n">RaiseException</span><span class="tok-p">:</span> <span class="tok-p">(</span><span class="tok-no">NameError</span><span class="tok-p">)</span> <span class="tok-n">uninitialized</span> <span class="tok-n">constant</span> <span class="tok-no">Killbill</span><span class="tok-o">::</span><span class="tok-no">Plugin</span><span class="tok-o">::</span><span class="tok-no">Api</span><span class="tok-o">::</span><span class="tok-no">OverdueApi</span>
	<span class="tok-n">at</span> <span class="tok-no">RUBY</span><span class="tok-o">.</span><span class="tok-n">load_missing_constant</span><span class="tok-p">(</span><span class="tok-sr">/var/</span><span class="tok-n">tmp</span><span class="tok-o">/</span><span class="tok-n">bundles2</span><span class="tok-o">/</span><span class="tok-n">plugins</span><span class="tok-o">/</span><span class="tok-n">ruby</span><span class="tok-o">/</span><span class="tok-n">killbill</span><span class="tok-o">-</span><span class="tok-n">stripe</span><span class="tok-o">/</span><span class="tok-mi">4</span><span class="tok-o">.</span><span class="tok-mi">1</span><span class="tok-o">.</span><span class="tok-mi">0</span><span class="tok-o">/</span><span class="tok-no">ROOT</span><span class="tok-o">/</span><span class="tok-n">gems</span><span class="tok-o">/</span><span class="tok-n">gems</span><span class="tok-o">/</span><span class="tok-n">activesupport</span><span class="tok-o">-</span><span class="tok-mi">4</span><span class="tok-o">.</span><span class="tok-mi">1</span><span class="tok-o">.</span><span class="tok-mi">16</span><span class="tok-o">/</span><span class="tok-n">lib</span><span class="tok-o">/</span><span class="tok-n">active_support</span><span class="tok-o">/</span><span class="tok-n">dependencies</span><span class="tok-o">.</span><span class="tok-n">rb</span><span class="tok-p">:</span><span class="tok-mi">520</span><span class="tok-p">)</span>
	<span class="tok-n">at</span> <span class="tok-no">RUBY</span><span class="tok-o">.</span><span class="tok-n">const_missing</span><span class="tok-p">(</span><span class="tok-sr">/var/</span><span class="tok-n">tmp</span><span class="tok-o">/</span><span class="tok-n">bundles2</span><span class="tok-o">/</span><span class="tok-n">plugins</span><span class="tok-o">/</span><span class="tok-n">ruby</span><span class="tok-o">/</span><span class="tok-n">killbill</span><span class="tok-o">-</span><span class="tok-n">stripe</span><span class="tok-o">/</span><span class="tok-mi">4</span><span class="tok-o">.</span><span class="tok-mi">1</span><span class="tok-o">.</span><span class="tok-mi">0</span><span class="tok-o">/</span><span class="tok-no">ROOT</span><span class="tok-o">/</span><span class="tok-n">gems</span><span class="tok-o">/</span><span class="tok-n">gems</span><span class="tok-o">/</span><span class="tok-n">activesupport</span><span class="tok-o">-</span><span class="tok-mi">4</span><span class="tok-o">.</span><span class="tok-mi">1</span><span class="tok-o">.</span><span class="tok-mi">16</span><span class="tok-o">/</span><span class="tok-n">lib</span><span class="tok-o">/</span><span class="tok-n">active_support</span><span class="tok-o">/</span><span class="tok-n">dependencies</span><span class="tok-o">.</span><span class="tok-n">rb</span><span class="tok-p">:</span><span class="tok-mi">180</span><span class="tok-p">)</span>
	<span class="tok-n">at</span> <span class="tok-n">org</span><span class="tok-o">.</span><span class="tok-n">jruby</span><span class="tok-o">.</span><span class="tok-n">RubyModule</span><span class="tok-o">.</span><span class="tok-n">const_get</span><span class="tok-p">(</span><span class="tok-n">org</span><span class="tok-o">/</span><span class="tok-n">jruby</span><span class="tok-o">/</span><span class="tok-no">RubyModule</span><span class="tok-o">.</span><span class="tok-n">java</span><span class="tok-p">:</span><span class="tok-mi">2648</span><span class="tok-p">)</span>
	<span class="tok-n">at</span> <span class="tok-no">RUBY</span><span class="tok-o">.</span><span class="tok-n">to_class</span><span class="tok-p">(</span><span class="tok-sr">/var/</span><span class="tok-n">tmp</span><span class="tok-o">/</span><span class="tok-n">bundles2</span><span class="tok-o">/</span><span class="tok-n">plugins</span><span class="tok-o">/</span><span class="tok-n">ruby</span><span class="tok-o">/</span><span class="tok-n">killbill</span><span class="tok-o">-</span><span class="tok-n">stripe</span><span class="tok-o">/</span><span class="tok-mi">4</span><span class="tok-o">.</span><span class="tok-mi">1</span><span class="tok-o">.</span><span class="tok-mi">0</span><span class="tok-o">/</span><span class="tok-no">ROOT</span><span class="tok-o">/</span><span class="tok-n">gems</span><span class="tok-o">/</span><span class="tok-n">gems</span><span class="tok-o">/</span><span class="tok-n">killbill</span><span class="tok-o">-</span><span class="tok-mi">8</span><span class="tok-o">.</span><span class="tok-mi">3</span><span class="tok-o">.</span><span class="tok-mi">0</span><span class="tok-o">/</span><span class="tok-n">lib</span><span class="tok-o">/</span><span class="tok-n">killbill</span><span class="tok-o">.</span><span class="tok-n">rb</span><span class="tok-p">:</span><span class="tok-mi">12</span><span class="tok-p">)</span>
	<span class="tok-n">at</span> <span class="tok-n">org</span><span class="tok-o">.</span><span class="tok-n">jruby</span><span class="tok-o">.</span><span class="tok-n">RubyArray</span><span class="tok-o">.</span><span class="tok-n">each</span><span class="tok-p">(</span><span class="tok-n">org</span><span class="tok-o">/</span><span class="tok-n">jruby</span><span class="tok-o">/</span><span class="tok-no">RubyArray</span><span class="tok-o">.</span><span class="tok-n">java</span><span class="tok-p">:</span><span class="tok-mi">1613</span><span class="tok-p">)</span>
	<span class="tok-n">at</span> <span class="tok-n">org</span><span class="tok-o">.</span><span class="tok-n">jruby</span><span class="tok-o">.</span><span class="tok-n">RubyEnumerable</span><span class="tok-o">.</span><span class="tok-n">inject</span><span class="tok-p">(</span><span class="tok-n">org</span><span class="tok-o">/</span><span class="tok-n">jruby</span><span class="tok-o">/</span><span class="tok-no">RubyEnumerable</span><span class="tok-o">.</span><span class="tok-n">java</span><span class="tok-p">:</span><span class="tok-mi">866</span><span class="tok-p">)</span>
	<span class="tok-n">at</span> <span class="tok-no">RUBY</span><span class="tok-o">.</span><span class="tok-n">to_class</span><span class="tok-p">(</span><span class="tok-sr">/var/</span><span class="tok-n">tmp</span><span class="tok-o">/</span><span class="tok-n">bundles2</span><span class="tok-o">/</span><span class="tok-n">plugins</span><span class="tok-o">/</span><span class="tok-n">ruby</span><span class="tok-o">/</span><span class="tok-n">killbill</span><span class="tok-o">-</span><span class="tok-n">stripe</span><span class="tok-o">/</span><span class="tok-mi">4</span><span class="tok-o">.</span><span class="tok-mi">1</span><span class="tok-o">.</span><span class="tok-mi">0</span><span class="tok-o">/</span><span class="tok-no">ROOT</span><span class="tok-o">/</span><span class="tok-n">gems</span><span class="tok-o">/</span><span class="tok-n">gems</span><span class="tok-o">/</span><span class="tok-n">killbill</span><span class="tok-o">-</span><span class="tok-mi">8</span><span class="tok-o">.</span><span class="tok-mi">3</span><span class="tok-o">.</span><span class="tok-mi">0</span><span class="tok-o">/</span><span class="tok-n">lib</span><span class="tok-o">/</span><span class="tok-n">killbill</span><span class="tok-o">.</span><span class="tok-n">rb</span><span class="tok-p">:</span><span class="tok-mi">11</span><span class="tok-p">)</span>
	<span class="tok-n">at</span></code></pre></div></div></div>
<div class="sect2"><h3 id="_adding_a_new_api_method_on_a_killbillapi">Adding a new API Method On a <code>KillbillApi</code></h3><div class="paragraph"><p>All the <code>KillbillApi</code> files are creating through Guice AOP proxy (in order to intercept the calls and verify permissions). We will run 2 experiments</p></div>
<div class="sect3"><h4 id="_api_file_not_used_by_the_plugin">API file <strong>not used</strong> by the plugin</h4><div class="paragraph"><p>In this experiment, i added a new method in the <code>Entitlement</code> class and started a a ruby payment plugin (e.g <code>stripe</code>), and verified the plugin loads fine and and work as expected.</p></div></div>
<div class="sect3"><h4 id="_api_file_is_used_by_the_plugin">API file <strong>is used</strong> by the plugin</h4><div class="paragraph"><p>In this experiment, I added a new method in the the <code>PaymentApi</code> class, and verified that plugin loads fine and and work as expected. In addition, i made sure, such plugin calls a method from that api (e.g <code>getPayment()</code>), and that such call works as expected.</p></div>
<div class="paragraph"><p>The test has been run both using a ruby plugin (<code>stripe</code>) and a java plugin (<code>adyen</code>).</p></div></div></div>
<div class="sect2"><h3 id="_adding_a_new_api_method_on_a_non_killbillapi">Adding a new API method on a <strong>non</strong> <code>KillbillApi</code></h3><div class="paragraph"><p>Some of our apis are embedded in our objects (e.g <code>Entitlement</code>). Such implementation are not created through Guice (and not using AOP) but instead are regular POJO, so it is important to validate those cases as well.</p></div>
<div class="sect3"><h4 id="_api_file_not_used_by_the_plugin_2">API file <strong>not used</strong> by the plugin</h4><div class="paragraph"><p>Skipped: (see next case)</p></div></div>
<div class="sect3"><h4 id="_api_file_is_used_by_the_plugin_2">API file <strong>is used</strong> by the plugin</h4><div class="paragraph"><p>In this experiment, i verified that adding a method on the <code>Entitlement</code> API, would not prevent the plugin to first retrieve <code>Entitlement</code> objects and second make API calls on this object.</p></div>
<div class="paragraph"><p>I ran the experiment using the adyen plugin. I also tried using stripe plugin but could not complete it because of this <a href="https://github.com/killbill/killbill-plugin-framework-ruby/issues/60">issue</a>.</p></div></div></div>
<div class="sect2"><h3 id="_conclusion">Conclusion</h3><div class="paragraph"><p>It seems like adding <strong>new API methods</strong> to either our <code>KillbillApi</code> objects or other API interface is well handled by plugins, in the sense they keep working as expected without having to be regenerated. Of course, such new APIs are not available to the plugins until they get rebuilt.</p></div></div></div></div>
<div class="sect1"><h2 id="_releases">Releases</h2><div class="sectionbody"><div class="paragraph"><p>Summary of the steps (and gotchas) to release Kill Bill.</p></div>
<div class="sect2"><h3 id="_versioning">Versioning</h3><div class="paragraph"><p>A Kill Bill version has major, minor and patch numbers:</p></div>
<div class="ulist"><ul><li><p>major is currently locked at 0</p></li><li><p>even minor numbers are reserved for stable releases (production ready)</p></li><li><p>odd minor numbers are reserved for development releases (APIs and Plugin APIs can change)</p></li></ul></div>
<div class="paragraph"><p>While plugins can use their own versioning scheme, official plugins have major, minor and patch numbers:</p></div>
<div class="ulist"><ul><li><p>major tracks specific Kill Bill minor releases (e.g. 1.x.y for 0.14.z, 2.x.y for 0.15.z, 3.x.y for 0.16.z, etc.)</p></li><li><p>minor are used to track large changes in the plugin (e.g. gateway API version change)</p></li></ul></div></div>
<div class="sect2"><h3 id="_kill_bill_release">Kill Bill Release</h3><div class="sect3"><h4 id="_pre_requisites">Pre-requisites</h4><div class="ulist"><ul><li><p>All code should be checked-in</p></li><li><p>All tests should pass on both the MySQL and Travis profiles:</p></li></ul></div>
<div class="listingblock"><div class="content"><pre>mvn clean install -Pmysql
mvn clean install -Ptravis</pre></div></div>
<div class="ulist"><ul><li><p>Take a look at CircleCI</p></li></ul></div></div>
<div class="sect3"><h4 id="_documentation_updates">Documentation updates</h4><div class="ulist"><ul><li><p>Update the NEWS file with GitHub issues closed for that release and summary of important changes or bug fixes. You can browse the commits since the latest tag via:</p></li></ul></div>
<div class="listingblock"><div class="content"><pre>git log $(git describe --tags $(git rev-list --tags --max-count=1))..</pre></div></div>
<div class="ulist"><ul><li><p>Create a release page. While the NEWS file is geared towards developers, the release notes are meant for users upgrading. Mention JAX-RS and DDL changes, new features, etc.</p></li><li><p>Update <code>killbill-server-update-list.properties</code> in <a href="https://github.com/killbill/killbill/blob/master/profiles/killbill/src/main/resources/update-checker/killbill-server-update-list.properties">killbill</a> and <a href="https://github.com/killbill/killbill/blob/master/profiles/killpay/src/main/resources/update-checker/killbill-server-update-list.properties">killpay</a> with a link to these release notes</p></li></ul></div></div>
<div class="sect3"><h4 id="_release">Release</h4><div class="ulist"><ul><li><p>To release, in each Java repo: <code>mvn release:clean &amp;&amp; mvn release:prepare &amp;&amp; mvn release:perform</code></p></li><li><p>The order of release is:</p><div class="ulist"><ul><li><p>killbill-api</p></li><li><p>killbill-oss-parent</p></li><li><p>killbill-plugin-api</p></li><li><p>killbill-oss-parent</p></li><li><p>killbill-commons</p></li><li><p>killbill-oss-parent</p></li><li><p>killbill-plugin-framework-ruby (with code regenerated)</p></li><li><p>killbill-currency-plugin-test (with update killbill gem)</p></li><li><p>killbill-notification-test-plugin (with update killbill gem)</p></li><li><p>killbill-payment-test-plugin (with update killbill gem)</p></li><li><p>killbill-platform (updated with the latest plugins)</p></li><li><p>killbill-oss-parent</p></li><li><p>killbill</p></li></ul></div></li><li><p>If JAX-RS was changed, regenerate the client libraries and update Kaui.</p></li><li><p>Update killbill-docs, including XSD and DDL files in the branch <code>gh-pages</code>.</p></li></ul></div></div></div>
<div class="sect2"><h3 id="_gotchas">Gotchas</h3><div class="ulist"><ul><li><p>To re-run a <code>release:perform</code> of an arbitrary tag:</p></li></ul></div>
<div class="listingblock"><div class="content"><pre>mvn -DconnectionUrl=scm:git:git@github.com:killbill/killbill.git -Dtag=your_tag release:perform</pre></div></div>
<div class="ulist"><ul><li><p>If <code>release:perform</code> fails because of Sonatype issues during the 'Closing staging repository&#8230;&#8203;' stage, wait between 30 and 40 minutes - the operation should finish in the background. If it doesn&#8217;t and/or the repository is dropped, try the following switches:</p></li></ul></div>
<div class="listingblock"><div class="content"><pre>mvn -DkeepStagingRepositoryOnFailure=true -DkeepStagingRepositoryOnCloseRuleFailure=true -DautoReleaseAfterClose=true -DstagingProgressTimeoutMinutes=20 -DconnectionUrl=scm:git:git@github.com:killbill/killbill.git -Dtag=your_tag release:perform</pre></div></div>
<div class="ulist"><ul><li><p>If the timeout happens during the 'Remote staging repositories are being released&#8230;&#8203;' stage, wait again between 30 and 40 minutes - the operation should finish in the background. If it doesn&#8217;t, try going to the UI and close it.</p></li><li><p>If the release fails with signature errors, e.g.:</p></li></ul></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code>Waiting for operation to complete.......................................

[ERROR]
[ERROR] Nexus Staging Rules Failure Report
[ERROR] ==================================
[ERROR]
[ERROR] Repository "comning-1234" failures
[ERROR]   Rule "signature-staging" failures
[ERROR] *** Invalid Signature: '/com/ning/billing/killbill-beatrix/0.3.6/killbill-beatrix-0.3.6-tests.jar.asc' is not a valid signature for 'killbill-beatrix-0.3.6-tests.jar'.
[ERROR] *** Invalid Signature: '/com/ning/billing/killbill-beatrix/0.3.6/killbill-beatrix-0.3.6-test-sources.jar.asc' is not a valid signature for 'killbill-beatrix-0.3.6-test-sources.jar'.
[ERROR] *** Invalid Signature: '/com/ning/billing/killbill-osgi-bundles-test-payment/0.3.6/killbill-osgi-bundles-test-payment-0.3.6-jar-with-dependencies.jar.asc' is not a valid signature for 'killbill-osgi-bundles-test-payment-0.3.6-jar-with-dependencies.jar'.
[ERROR]</code></pre></div></div>
<div class="paragraph"><p>keep re-trying to close (maybe try the <strong>nexus-staging:release</strong> goal manually). In my testing, you need <strong>N</strong> numbers of retries, where <strong>N</strong> is the original number of invalid signatures (after each run, you should have fewer and fewer errors). Alternatively, you can follow the steps <a href="http://www.sonatype.com/books/nexus-book/reference/staging-sect-managing-staging.html">here</a>.
* If you are having some issues and need to (re-)upload all the artifacts, you can do it manually:
 * Go in the checkout/target directory and run <code>jar -cvf bundle.jar project.pom project.pom.asc project.jar project.jar.asc &#8230;&#8203;.</code> where project is the name of your repo and include as many artifact with their signature as you have
 * Then go under 'Staging Upload' and select 'Upload Mode' = 'Artifact Bundle', and select the bundle you just created</p></div>
<div class="paragraph"><p>An example of a script for the killbill-platform repo to generate the bundle.jar for each modules, which can then be updated later by hand:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="bash"><span class="tok-k">for</span> m in platform-api base lifecycle osgi-api osgi osgi-bundles platform-test server<span class="tok-p">;</span> <span class="tok-k">do</span> <span class="tok-nv">RES</span><span class="tok-o">=</span><span class="tok-s2">&quot;&quot;</span><span class="tok-p">;</span> <span class="tok-nb">cd</span> <span class="tok-nv">$m</span>/target<span class="tok-p">;</span> <span class="tok-k">for</span> i in <span class="tok-sb">`</span>ls <span class="tok-p">|</span> grep asc<span class="tok-sb">`</span><span class="tok-p">;</span> <span class="tok-k">do</span> <span class="tok-nv">base</span><span class="tok-o">=</span><span class="tok-sb">`</span><span class="tok-nb">echo</span> <span class="tok-nv">$i</span> <span class="tok-p">|</span> sed s/.asc//<span class="tok-sb">`</span><span class="tok-p">;</span> <span class="tok-nv">RES</span><span class="tok-o">=</span><span class="tok-s2">&quot;$RES $base $base.asc&quot;</span><span class="tok-p">;</span> <span class="tok-k">done</span><span class="tok-p">;</span> rm -f bundle.jar<span class="tok-p">;</span> jar -cvf bundle.jar <span class="tok-nv">$RES</span><span class="tok-p">;</span>  <span class="tok-nb">cd</span> ../..<span class="tok-p">;</span> <span class="tok-k">done</span></code></pre></div></div></div></div></div></div></div><div class="col-sm-2 border-columns"></div><div id="footer"><div id="footer-text"><br>Last updated 2018-07-12 09:29:40 UTC</div></div><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.js"></script></body></html>